# CUDA settings
# Note: --enable_workspace is no longer needed in Bazel 7.0+
# WORKSPACE support is automatic when WORKSPACE.bazel exists
build --repo_env=HERMETIC_CUDA_VERSION="12.4.0"
build --@rules_cuda//cuda:enable=True
build --@rules_cuda//cuda:compiler=nvcc
build --@rules_cuda//cuda:copts=-allow-unsupported-compiler

# Build settings
build --cxxopt=-std=c++23
build --host_cxxopt=-std=c++23

# Color output
common --color=yes

# Keep going on errors
build --keep_going

# Performance - optimize for Docker containers
build --jobs=auto
# Note: local_ram_resources and local_cpu_resources are set dynamically in Dockerfile
build --experimental_repository_cache_hardlinks
build --disk_cache=/tmp/bazel-cache
# Disable remote cache by default (can be enabled if remote cache is configured)
build --remote_cache=

# Coverage settings
coverage --combined_report=lcov
coverage --instrumentation_filter="//cpp_accelerator/..."
coverage --instrument_test_targets
coverage --build_tests_only
coverage --experimental_generate_llvm_lcov
