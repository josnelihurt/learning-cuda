# Enable WORKSPACE for OpenTelemetry C++ dependencies
common --enable_workspace

# CUDA settings
build --repo_env=HERMETIC_CUDA_VERSION="12.4.0"
build --@rules_cuda//cuda:enable=True
build --@rules_cuda//cuda:compiler=nvcc
build --@rules_cuda//cuda:copts=-allow-unsupported-compiler

# Build settings
build --cxxopt=-std=c++23
build --host_cxxopt=-std=c++23

# Color output
common --color=yes

# Keep going on errors
build --keep_going

# Performance
build --jobs=auto

# Coverage settings
coverage --combined_report=lcov
coverage --instrumentation_filter="//cpp_accelerator/..."
coverage --instrument_test_targets
coverage --build_tests_only
coverage --experimental_generate_llvm_lcov
